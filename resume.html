<html>
    <head>
        <title>Max P. Rafferty: Resume</title>
        <script>
            /** @constant {string}*/ var resumeData = 'https://raw.githubusercontent.com/MaxPRafferty/Resume/master/resume.txt';
            var setupPage, insertNode;
            (function() {
                var xmlHttp = new XMLHttpRequest();
                xmlHttp.onreadystatechange = function() { 
                    if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
                        setupPage(JSON.parse(xmlHttp.responseText));
                    }
                }
                xmlHttp.open("GET", 'https://raw.githubusercontent.com/MaxPRafferty/Resume/master/resume.txt', true); // true for asynchronous 
                xmlHttp.send(null);
            })();
            /**
             * Inserts specified text into the first node with a given class
             * @param {string} className class to insert text into
             * @param {string|object} node text or node to insert
             * @param {object} [parent=document] node to insert into
             */
            insertNode = function(className, node, parent) {
                var classNode;
                parent = parent || document;
                classNode = parent.getElementsByClassName(className)[0];
                node = (typeof node === 'string') ? document.createTextNode(node) : node;
                classNode.appendChild(node);
            };
            /**
             * hides fallback iframe, inserts resume text
             */
            setupPage = function (data) {
                var header, article, sections, spanTemp, mkSpan;
                mkSpan = function(className) { spanTemp = document.createElement('span'); spanTemp.className = className;};
                data = data['Max Rafferty']; //Ugly, but strangely appealing to the ego
                header = document.getElementsByClassName('header')[0];
                document.getElementsByClassName('fallback')[0].style.display = 'none';
                header.style.display = 'block';
                mkSpan('name');
                header.appendChild(spanTemp);
                insertNode('name', 'Max P. Rafferty', header); //Come now, object keys is overkill
                mkSpan('contact');
                header.appendChild(spanTemp);
                insertNode('contact', data.Contact.Email, header);
                insertNode('contact', data.Contact.Phone, header);
                insertNode('contact', data.Contact.Address, header);
                insertNode('contact', data.Contact.Github, header);
                insertNode('contact', data.Contact.Linkedin, header);
                insertNode('contact', data.Contact.StackOverflow, header);

                insertNode('sweater', header);
            };
        </script>
        <style>
            .header {
                display: none;
            }
        </style>
    </head>
    <body>
        <iframe class="fallback" frameborder="0" src="https://cdn.rawgit.com/MaxPRafferty/Resume/master/resume.txt" style="
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            bottom: 0;
            right: 0;
            height: 100%;
            overflow: hidden;
        "></iframe>
        <div class="sweater">a
            <header class="header">
                <span class="name" />
                <span class="contact" >
                    <span class='email' />
                    <span class='phone' />
                    <span class='address' />
                    <span class='gh' />
                    <span class='li' />
                    <span class='so' />
                </span>
            </header>
            <article class="resume">
                <section>
                    <h2 class="section-title" />
                    <div class="section-body">
                        <div class="item"> 
                            <h3 class="item-title" />
                            <div class="item-description" />
                        </div>
                    </div>
                </section>
            </article>
        </div>
    </body>
</html>
